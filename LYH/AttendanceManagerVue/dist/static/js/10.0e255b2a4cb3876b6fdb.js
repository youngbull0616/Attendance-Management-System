webpackJsonp([10],{Shk3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),o=a("mtWM"),s=a.n(o),l={data:function(){return{tableData:[],dialogFormVisible:!1,dialogTitle:"",form:{id:"",title:"",time:"",roomID:"",participants:"",host:"",details:"",publisherNumber:"",publisherName:"",publishTime:"",beginDate:"",endDate:"",beginTime:"",endTime:"",type:"1",date1:"",date2:"",date3:"",date4:""},isAdmin:!1,form1:{id:"",number:sessionStorage.getItem("username"),name:"",sex:"",birthday:"",departmentID:"",position:"",type:"",entryDate:"",phone:"",address:"",password:"",checkPass:""},id:"",employeeName:"",employeeNumber:"",isCreate:!1,isUpdate:!1,isShow:!1,roomList:[],rules:{title:[{required:!0,message:"标题不能为空！",trigger:"blur"}],date1:[{required:!0,validator:this.beginDate,trigger:"change"}],date2:[{required:!0,validator:this.beginTime,trigger:"change"}],date3:[{required:!0,validator:this.endDate,trigger:"change"}],date4:[{required:!0,validator:this.endTime,trigger:"change"}],roomID:[{required:!0,message:"请选择会议室",trigger:"change"}]}}},created:function(){this.getData(),this.getUsername()},methods:{getData:function(){var e=this;s.a.get("/meeting/getAllMeeting").then(function(t){e.getRoomList(),e.tableData=t.data})},resetTemp:function(){this.form={id:"",title:"",time:"",place:"",participants:"",host:this.employeeName,details:"",publisherNumber:this.employeeNumber,publisherName:this.employeeName,publishTime:this.getTime(),beginDate:"",endDate:"",beginTime:"",endTime:"",type:"1",date1:"",date2:"",date3:"",date4:""}},resetForm:function(){this.$refs.form.resetFields(),this.form.host=this.employeeName,this.form.publisherNumber=this.employeeNumber,this.form.publisherName=this.employeeName,this.form.publishTime=this.getTime("datetime"),this.form.type="1"},handleCreate:function(){this.getRoomList(),this.dialogTitle="发布会议",this.isCreate=!0,this.isUpdate=!1,this.isShow=!0,this.dialogFormVisible=!0,this.form={id:"",title:"",time:"",roomID:"",participants:"",host:"",details:"",publisherNumber:"",publisherName:"",publishTime:"",beginDate:"",endDate:"",beginTime:"",endTime:"",type:"1",date1:"",date2:"",date3:"",date4:""}},handleUpdate:function(e){this.form=r()({},e),this.dialogTitle="查看会议详情",this.isCreate=!1,this.isUpdate=!0,this.isShow=!1,this.dialogFormVisible=!0},handleDelete:function(e){var t=this;e&&(this.id=e.id),this.$confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.a.post("/meeting/deleteById",{id:t.id}).then(function(e){t.$message({message:"删除成功",type:"success"}),t.getData()})})},onSubmit:function(){},createData:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.beginTime=e.form.date1+" "+e.form.date2,e.form.endTime=e.form.date3+" "+e.form.date4,s.a.post("/meeting/insert",e.form).then(function(t){e.dialogFormVisible=!1,e.$message({message:"发布成功",type:"success"}),e.getData()})})},getUsername:function(){var e=this;s.a.post("/employee/findByNumber",this.form1).then(function(t){e.employeeName=t.data.name,e.employeeNumber=t.data.number,e.form.publisherName=t.data.name,e.form.publisherNumber=t.data.number,3==t.data.type?e.isAdmin=!0:e.isAdmin=!1})},getTime:function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),o=t.getMinutes(),s=t.getHours(),l=t.getSeconds();if(i>=1&&i<=9&&(i="0"+i),r>=0&&r<=9&&(r="0"+r),s>=0&&s<=9&&(s="0"+s),o>=0&&o<=9&&(o="0"+o),l>=0&&l<=9&&(l="0"+l),"date"==e)var m=a+"-"+i+"-"+r;else if("time"==e)m=s+":"+o+":"+l;else m=a+"-"+i+"-"+r+" "+s+":"+o+":"+l;return m},getRoomList:function(){var e=this;s.a.get("/fixedasset/getRoomList").then(function(t){e.roomList=t.data})},compareDate:function(e,t){return new Date(t).getTime()>=new Date(e).getTime()},beginDate:function(e,t,a){t?this.compareDate(this.getTime("date"),t)?this.form.date3?this.compareDate(t,this.form.date3)?a():a(new Error("晚于结束日期请重新选择")):a():a(new Error("早于当前日期请重新选择")):a(new Error("开始日期不能为空！"))},endDate:function(e,t,a){t?this.form.date1?this.compareDate(this.form.date1,t)?a():a(new Error("早于开始日期请重新选择")):a():a(new Error("结束日期不能为空！"))},beginTime:function(e,t,a){t?this.form.date1&&(new Date(this.form.date1).getTime()==new Date(this.getTime("date")).getTime()?this.compareDate(this.getTime("datetime"),this.form.date1+" "+t)?a():a(new Error("早于当前时间请重新选择")):this.form.date3&&new Date(this.form.date1).getTime()==new Date(this.form.date3).getTime()&&this.form.date4?this.compareDate(this.form.date1+" "+t,this.form.date3+" "+this.form.date4)?a():a(new Error("晚于结束时间请重新选择")):a()):a(new Error("开始时间不能为空！"))},endTime:function(e,t,a){t?new Date(this.form.date1).getTime()==new Date(this.form.date3).getTime()&&this.form.date2?this.compareDate(this.form.date1+" "+this.form.date2,this.form.date3+" "+t)?a():a(new Error("早于开始时间请重新选择")):a():a(new Error("结束时间不能为空！"))}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pro-container"},[a("div",{staticClass:"filter-container"},[a("div",{staticClass:"right-items",staticStyle:{"text-align":"left"}},[e.isAdmin?a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v(" 发起会议")]):e._e()],1)]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"publisherName",label:"发布人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roomName",label:"地点"}}),e._v(" "),a("el-table-column",{attrs:{prop:"details",label:"详情"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v(" 查看详情")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",staticStyle:{width:"420px","margin-left":"50px"},attrs:{rules:e.rules,model:e.form,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入会议标题~",readonly:e.isUpdate},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),e.isCreate?a("el-form-item",{attrs:{label:"开始时间",prop:"beginTime"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"date1"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",readonly:e.isUpdate},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"date2"}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间","value-format":"HH:mm:ss",readonly:e.isUpdate},model:{value:e.form.date2,callback:function(t){e.$set(e.form,"date2",t)},expression:"form.date2"}})],1)],1)],1):e._e(),e._v(" "),e.isCreate?a("el-form-item",{attrs:{label:"结束时间",prop:"endTime"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"date3"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",readonly:e.isUpdate},model:{value:e.form.date3,callback:function(t){e.$set(e.form,"date3",t)},expression:"form.date3"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"date4"}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间","value-format":"HH:mm:ss",readonly:e.isUpdate},model:{value:e.form.date4,callback:function(t){e.$set(e.form,"date4",t)},expression:"form.date4"}})],1)],1)],1):e._e(),e._v(" "),e.isUpdate?a("el-form-item",{attrs:{label:"开始时间"}},[a("el-input",{attrs:{readonly:e.isUpdate},model:{value:e.form.beginTime,callback:function(t){e.$set(e.form,"beginTime",t)},expression:"form.beginTime"}})],1):e._e(),e._v(" "),e.isUpdate?a("el-form-item",{attrs:{label:"结束时间"}},[a("el-input",{attrs:{readonly:e.isUpdate},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"会议室",prop:"roomID"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择会议室",disabled:e.isUpdate},model:{value:e.form.roomID,callback:function(t){e.$set(e.form,"roomID",t)},expression:"form.roomID"}},e._l(e.roomList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发布人"}},[a("el-input",{attrs:{placeholder:"请输入会议发布人~",readonly:""},model:{value:e.form.publisherName,callback:function(t){e.$set(e.form,"publisherName",t)},expression:"form.publisherName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详情"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入会议详情~",readonly:e.isUpdate},model:{value:e.form.details,callback:function(t){e.$set(e.form,"details",t)},expression:"form.details"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消")]),e._v(" "),e.isShow?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createData()}}},[e._v(" 确 定")]):e._e()],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(l,m,!1,function(e){a("Z5Nz")},"data-v-1af77f6c",null);t.default=n.exports},Z5Nz:function(e,t){}});
//# sourceMappingURL=10.0e255b2a4cb3876b6fdb.js.map