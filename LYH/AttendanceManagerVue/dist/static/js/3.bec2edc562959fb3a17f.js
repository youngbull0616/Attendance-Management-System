webpackJsonp([3],{EKzZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),o=a.n(r),l=a("mtWM"),s=a.n(l),i={data:function(){return{tableData:[],dialogFormVisible:!1,dialogTitle:"",form:{},form1:{},isLeave:!1,isFixed:!1,isShow:!1,isApproval:!0}},created:function(){this.getData()},methods:{getData:function(){var e=this;s.a.post("/task/list",{receiveNumber:sessionStorage.getItem("username")}).then(function(t){if(!document.cookie.split(";").some(function(e){return e.trim().startsWith("LOGIN=")}))return e.$router.push("/"),void e.$message({message:"未登录或登录信息过期",type:"error"});e.tableData=t.data})},handleUpdate:function(e){var t=this;"待审批"==e.statusName?(this.isShow=!0,this.isApproval=!1):(this.isShow=!1,this.isApproval=!0),this.form1=o()({},e),s.a.post("/task/findByApplyID",this.form1).then(function(e){t.form=e.data,"1"==t.form.status?t.form.status="已通过":"2"==t.form.status&&(t.form.status="已驳回"),t.dialogTitle="审批任务",t.dialogFormVisible=!0,1==e.data.taskTypeID?(t.isFixed=!1,t.isLeave=!0):2==e.data.taskTypeID&&(t.isLeave=!1,t.isFixed=!0)})},approval:function(e){var t=this;this.form1.advice=e,this.form1.approvalTime=this.getTime(),this.form1.approvalNumber=sessionStorage.getItem("username"),s.a.post("/task/approval",this.form1).then(function(e){200==e.data.code&&(t.dialogFormVisible=!1,t.$message({message:"审批成功",type:"success"}),t.getData())})},getTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),o=e.getMinutes(),l=e.getHours(),s=e.getSeconds();return a>=1&&a<=9&&(a="0"+a),r>=0&&r<=9&&(r="0"+r),l>=0&&l<=9&&(l="0"+l),o>=0&&o<=9&&(o="0"+o),s>=0&&s<=9&&(s="0"+s),t+"-"+a+"-"+r+" "+l+":"+o+":"+s},filterTag:function(e,t){return t.statusName===e}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pro-container"},[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"name",label:"任务名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applyName",label:"申请人姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"applyTime",label:"申请时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusName",label:"审批状态",filters:[{text:"待审批",value:"待审批"},{text:"已通过",value:"已通过"},{text:"已驳回",value:"已驳回"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"待审批"===t.row.statusName?"danger":"success","disable-transitions":""}},[e._v(e._s(t.row.statusName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"190",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return["待审批"===t.row.statusName?a("el-button",{attrs:{type:"warning"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v(" 审批任务")]):a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v(" 任务详情")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"tempData",staticStyle:{width:"420px","margin-left":"50px"},attrs:{model:e.form,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"申请人"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.applyName,callback:function(t){e.$set(e.form,"applyName",t)},expression:"form.applyName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"申请时间"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.applyTime,callback:function(t){e.$set(e.form,"applyTime",t)},expression:"form.applyTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"申请类型"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),e._v(" "),e.isLeave?a("el-form-item",{attrs:{label:"开始时间"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.beginTime,callback:function(t){e.$set(e.form,"beginTime",t)},expression:"form.beginTime"}})],1):e._e(),e._v(" "),e.isLeave?a("el-form-item",{attrs:{label:"结束时间"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1):e._e(),e._v(" "),e.isLeave?a("el-form-item",{attrs:{label:"时长"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.duration,callback:function(t){e.$set(e.form,"duration",t)},expression:"form.duration"}})],1):e._e(),e._v(" "),e.isLeave?a("el-form-item",{attrs:{label:"请假事由"}},[a("el-input",{attrs:{type:"textarea",readonly:""},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1):e._e(),e._v(" "),e.isFixed?a("el-form-item",{attrs:{label:"固定资产编号"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1):e._e(),e._v(" "),e.isFixed?a("el-form-item",{attrs:{label:"固定资产名称"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1):e._e(),e._v(" "),e.isFixed?a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1):e._e(),e._v(" "),e.isApproval?a("el-form-item",{attrs:{label:"审批人"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.approvalName,callback:function(t){e.$set(e.form,"approvalName",t)},expression:"form.approvalName"}})],1):e._e(),e._v(" "),e.isApproval?a("el-form-item",{attrs:{label:"审批时间"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.approvalTime,callback:function(t){e.$set(e.form,"approvalTime",t)},expression:"form.approvalTime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"审批结果"}},[a("el-input",{attrs:{readonly:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isShow?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.approval("yes")}}},[e._v(" 同 意")]):e._e(),e._v(" "),e.isShow?a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.approval("no")}}},[e._v(" 驳 回")]):e._e()],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(i,n,!1,function(e){a("b2X8")},null,null);t.default=m.exports},b2X8:function(e,t){}});
//# sourceMappingURL=3.bec2edc562959fb3a17f.js.map