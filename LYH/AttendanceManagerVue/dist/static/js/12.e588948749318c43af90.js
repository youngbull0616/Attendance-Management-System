webpackJsonp([12],{yZJr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),s=a.n(r),l=a("mtWM"),i=a.n(l),o={data:function(){return{tableData:[],ruleForm:{employeeNumber:sessionStorage.getItem("username"),employeeName:"",number:"",name:"",typeID:"",price:"",applyTime:this.getTime(),taskTypeID:"2",status:"",approvalID:""},rules:{number:[{required:!0,message:"请输入固定资产编号",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入固定资产名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],typeID:[{required:!0,message:"请选择固定资产类别",trigger:"change"}],price:[{required:!0,message:"价格不能为空"},{type:"number",message:"价格必须为数字值"}]},form:{id:"",number:sessionStorage.getItem("username"),name:"",sex:"",birthday:"",departmentID:"",position:"",type:"",entryDate:"",phone:"",address:"",password:"",checkPass:""},isshowForm:!0,isshowResult:!1,dialogFormVisible:!1,dialogTitle:"",isPass:!1,isNotApproval:!1,isCreate:!1,isUpdate:!1,isApproval:!1,employeeName:"",employeeNumber:"",typeList:[]}},created:function(){this.getData(),this.getUsername()},methods:{getData:function(){var e=this;i.a.post("/fixedasset/findByEmployeeNumber",{employeeNumber:sessionStorage.getItem("username")}).then(function(t){e.tableData=t.data,e.tableData.forEach(function(e){"0"==e.status?(e.statusName="待审批",e.isNotApproval=!0):"1"==e.status?(e.statusName="已通过",e.isPass=!0):"2"==e.status?e.statusName="已驳回":"3"==e.status&&(e.statusName="已撤销")})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;i.a.post("/fixedasset/insert",t.ruleForm).then(function(a){200==a.data.code?(t.dialogFormVisible=!1,t.$message({message:"申请成功",type:"success"}),t.$refs[e].resetFields(),t.ruleForm.employeeName=t.employeeName,t.ruleForm.applyTime=t.getTime(),t.dialogFormVisible=!1,t.getData()):20005==a.data.code&&t.$message({message:"该编号已存在",type:"error"})})})},resetForm:function(){this.$refs.ruleForm.resetFields(),this.ruleForm.employeeName=this.employeeName,this.ruleForm.applyTime=this.getTime(),this.employeeNumber=sessionStorage.getItem("username"),this.taskTypeID="2"},getUsername:function(){var e=this;i.a.post("/employee/findByNumber",this.form).then(function(t){e.employeeName=t.data.name,e.employeeNumber=t.data.number,e.ruleForm.employeeName=t.data.name,e.ruleForm.employeeNumber=t.data.number})},getTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),s=e.getMinutes(),l=e.getHours(),i=e.getSeconds();return a>=1&&a<=9&&(a="0"+a),r>=0&&r<=9&&(r="0"+r),l>=0&&l<=9&&(l="0"+l),s>=0&&s<=9&&(s="0"+s),i>=0&&i<=9&&(i="0"+i),t+"-"+a+"-"+r+" "+l+":"+s+":"+i},handleCreate:function(){this.getTypeList(),this.dialogTitle="发送申请",this.isCreate=!0,this.isUpdate=!1,this.isApproval=!1,this.dialogFormVisible=!0,this.resetForm()},handleUpdate:function(e){this.ruleForm=s()({},e),this.ruleForm.employeeName=this.employeeName,"0"==this.ruleForm.status?this.isApproval=!1:"1"!=this.ruleForm.status&&"2"!=this.ruleForm.status||(this.isApproval=!0),this.dialogTitle="申请详情",this.isUpdate=!0,this.isCreate=!1,this.dialogFormVisible=!0},getTypeList:function(){var e=this;i.a.get("/fixedassetType/list").then(function(t){e.typeList=t.data})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"text-align":"left","margin-left":"20px"}},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.handleCreate()}}},[e._v(" 发起申请")])],1),e._v(" "),a("div",{staticStyle:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},e._l(e.tableData,function(t){return a("el-card",{key:t.id,staticClass:"box-card",staticStyle:{width:"450px",margin:"20px"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"card-header"},[t.isPass?a("span",{staticStyle:{color:"green",float:"left"}},[e._v(e._s(t.statusName))]):t.isNotApproval?a("span",{staticStyle:{color:"gray",float:"left"}},[e._v(e._s(t.statusName))]):a("span",{staticStyle:{color:"red",float:"left"}},[e._v(e._s(t.statusName))]),e._v(" "),a("span",[e._v(e._s(e.ruleForm.employeeName)+"提交的固定资产申请")]),e._v(" "),a("el-button",{staticClass:"button",staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return e.handleUpdate(t)}}},[e._v("查看详情")])],1)]},proxy:!0}],null,!0)},[e._v(" "),a("div",{staticClass:"text item"},[e._v("\n        "+e._s("类型："+t.typeName)+"\n      ")]),e._v(" "),a("div",{staticClass:"text item"},[e._v("\n        "+e._s("申请时间："+t.applyTime)+"\n      ")])])}),1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[e.isshowForm?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{width:"100%"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"申请人",prop:"employeeName"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.employeeName,callback:function(t){e.$set(e.ruleForm,"employeeName",t)},expression:"ruleForm.employeeName"}})],1),e._v(" "),e.isUpdate?a("el-form-item",{attrs:{label:"申请时间",prop:"applyTime"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.applyTime,callback:function(t){e.$set(e.ruleForm,"applyTime",t)},expression:"ruleForm.applyTime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"编号",prop:"number"}},[a("el-input",{attrs:{placeholder:"请输入固定资产编号",readonly:e.isUpdate},model:{value:e.ruleForm.number,callback:function(t){e.$set(e.ruleForm,"number",t)},expression:"ruleForm.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入固定资产名称",readonly:e.isUpdate},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格",prop:"price"}},[a("el-input",{attrs:{placeholder:"请输入固定资产价格",readonly:e.isUpdate},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",e._n(t))},expression:"ruleForm.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别",prop:"typeID"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择固定资产类别",disabled:e.isUpdate},model:{value:e.ruleForm.typeID,callback:function(t){e.$set(e.ruleForm,"typeID",t)},expression:"ruleForm.typeID"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),e.isApproval?a("el-form-item",{attrs:{label:"审批人",prop:"approvalName"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.approvalName,callback:function(t){e.$set(e.ruleForm,"approvalName",t)},expression:"ruleForm.approvalName"}})],1):e._e(),e._v(" "),e.isApproval?a("el-form-item",{attrs:{label:"审批时间",prop:"approvalTime"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.approvalTime,callback:function(t){e.$set(e.ruleForm,"approvalTime",t)},expression:"ruleForm.approvalTime"}})],1):e._e(),e._v(" "),e.isUpdate?a("el-form-item",{attrs:{label:"审批状态",prop:"course"}},[a("el-input",{attrs:{readonly:e.isUpdate},model:{value:e.ruleForm.statusName,callback:function(t){e.$set(e.ruleForm,"statusName",t)},expression:"ruleForm.statusName"}})],1):e._e(),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消")]),e._v(" "),e.isCreate?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(" 立即申请")]):e._e()],1)],1):e._e()],1)],1)},staticRenderFns:[]},n=a("VU/8")(o,m,!1,null,null,null);t.default=n.exports}});
//# sourceMappingURL=12.e588948749318c43af90.js.map