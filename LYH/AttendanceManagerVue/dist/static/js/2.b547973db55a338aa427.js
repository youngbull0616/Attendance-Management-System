webpackJsonp([2],{"7YN8":function(e,t){},Mu7w:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),i=a.n(r),l=a("mtWM"),n=a.n(l),o={data:function(){return{tableData:[],departmentList:[],departmentName:"",dialogFormVisible:!1,dialogTitle:"",form:{id:"",number:"",name:"",sex:"",birthday:"",departmentID:"",position:"",type:"",entryDate:"",phone:"",address:"",idNumber:"",education:"",employeeType:"",marriage:"",workStatus:""},form1:{id:"",number:"",name:"",sex:"",birthday:"",departmentID:"",position:"",type:"",entryDate:"",phone:"",address:"",idNumber:"",education:"",employeeType:"",marriage:"",workStatus:""},sexList:[{id:"1",value:"男"},{id:"2",value:"女"}],marriageList:[{id:"1",value:"未婚"},{id:"2",value:"已婚"}],id:"",isCreate:!1,isUpdate:!1,typeList:[],educationList:[{id:"1",name:"初中"},{id:"2",name:"高中"},{id:"3",name:"中专"},{id:"4",name:"大专"},{id:"5",name:"本科"},{id:"6",name:"硕士"},{id:"7",name:"博士及以上"}],positionList:[],departmentID:"",rules:{number:[{required:!0,message:"请输入编号",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],entryDate:[{required:!0,message:"请选择入职日期",trigger:"change"}],idNumber:[{required:!0,message:"身份证号码不能为空",trigger:"blur"}],position:[{required:!0,message:"职位不能为空",trigger:"change"}]}}},created:function(){this.getData(),this.getDepartmentList(),this.getTypeList()},watch:{departmentID:function(e){this.isCreate&&(this.form.position=""),this.form.departmentID=e,this.getPosition()}},methods:{getData:function(){var e=this;n.a.get("/employee/list").then(function(t){if(!document.cookie.split(";").some(function(e){return e.trim().startsWith("LOGIN=")}))return e.$router.push("/"),void e.$message({message:"未登录或登录信息过期",type:"error"});e.tableData=t.data})},getDepartmentList:function(){var e=this;n.a.get("/department/list").then(function(t){e.departmentList=t.data})},getTypeList:function(){var e=this;n.a.get("/employeeType/list").then(function(t){e.typeList=t.data})},resetTemp:function(){this.form={id:"",number:"",name:"",sex:"",birthday:"",departmentID:"",position:"",type:"",entryDate:"",phone:"",address:"",idNumber:"",education:"",employeeType:"",marriage:"",workStatus:""},this.departmentID=""},resetForm:function(){this.form={id:"",number:"",name:"",sex:"",birthday:"",departmentID:"",position:"",type:"",entryDate:"",phone:"",address:"",idNumber:"",education:"",employeeType:"",marriage:"",workStatus:""},this.departmentID=""},handleCreate:function(){this.dialogTitle="添加信息",this.isCreate=!0,this.isUpdate=!1,this.dialogFormVisible=!0,this.resetForm()},handleUpdate:function(e){this.form=i()({},e),this.departmentID=this.form.departmentID,this.dialogTitle="编辑信息",this.isUpdate=!0,this.isCreate=!1,this.dialogFormVisible=!0},handleDelete:function(e){var t=this;e&&(this.id=e.id),this.$confirm("确定删除 "+e.name+" ?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.post("/employee/deleteById",{id:t.id}).then(function(e){console.log(e.data),200==e.data&&(t.$message({message:"删除成功",type:"success"}),t.getData())})}).catch(function(){})},onSubmit:function(){var e=this;n.a.post("/employee/findByNameAndDepartment",this.form1).then(function(t){e.tableData=t.data})},createData:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;n.a.post("/employee/insert",e.form).then(function(t){200==t.data.code?(e.dialogFormVisible=!1,e.$message({message:"添加成功",type:"success"}),e.getData()):20005==t.data.code&&e.$message({message:"该编号已存在",type:"error"})})})},updateData:function(){var e=this;n.a.post("/employee/update",this.form).then(function(t){"1"==t.data&&(e.dialogFormVisible=!1,e.$message({message:"修改成功",type:"success"}),e.getData())})},findByNameAndDepartment:function(){var e=this;n.a.post("/employee/findByNameAndDepartment",this.form).then(function(t){e.tableData=t.data})},getPosition:function(){var e=this;n.a.post("/position/findByDepartmentID",{departmentID:this.form.departmentID}).then(function(t){e.positionList=t.data})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pro-container"},[a("div",{staticClass:"filter-container",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"letf-items"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择部门"},model:{value:e.form1.departmentID,callback:function(t){e.$set(e.form1,"departmentID",t)},expression:"form1.departmentID"}},e._l(e.departmentList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter.apply(null,arguments)}},model:{value:e.form1.name,callback:function(t){e.$set(e.form1,"name",t)},expression:"form1.name"}}),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 查询")]),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.handleCreate}},[e._v(" 新增")])],1)]),e._v(" "),a("div",[a("el-table",{ref:"employeeList",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"number",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"birthday",label:"出生日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"departmentName",label:"所属部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"positionName",label:"职位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"entryDate",label:"入职日期"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v(" 编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(" 删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",staticStyle:{width:"420px","margin-left":"50px"},attrs:{rules:e.rules,model:e.form,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"编号",prop:"number"}},[a("el-input",{attrs:{placeholder:"请输入编号"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.sexList,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",editable:!1},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号码",prop:"idNumber"}},[a("el-input",{attrs:{placeholder:"请输入身份证号码~"},model:{value:e.form.idNumber,callback:function(t){e.$set(e.form,"idNumber",t)},expression:"form.idNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学历"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.education,callback:function(t){e.$set(e.form,"education",t)},expression:"form.education"}},e._l(e.educationList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"婚姻状况"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.marriage,callback:function(t){e.$set(e.form,"marriage",t)},expression:"form.marriage"}},e._l(e.marriageList,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属部门"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.departmentID,callback:function(t){e.departmentID=t},expression:"departmentID"}},e._l(e.departmentList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"职位",prop:"position"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}},e._l(e.positionList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"入职日期",prop:"entryDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",editable:!1},model:{value:e.form.entryDate,callback:function(t){e.$set(e.form,"entryDate",t)},expression:"form.entryDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{attrs:{placeholder:"请输入联系方式~"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"家庭住址"}},[a("el-input",{attrs:{placeholder:"请输入家庭住址~"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消")]),e._v(" "),e.isCreate?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createData()}}},[e._v(" 新增")]):e._e(),e._v(" "),e.isUpdate?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateData()}}},[e._v(" 修改")]):e._e()],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(o,s,!1,function(e){a("7YN8")},"data-v-7f5ca835",null);t.default=m.exports}});
//# sourceMappingURL=2.b547973db55a338aa427.js.map