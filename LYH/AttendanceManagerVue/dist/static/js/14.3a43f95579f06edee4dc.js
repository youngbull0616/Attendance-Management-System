webpackJsonp([14],{gq6x:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),l=a.n(r),i=a("mtWM"),s=a.n(i),o={data:function(){return{isFixed:!1,fixedList:[],ruleForm:{employeeNumber:sessionStorage.getItem("username"),employeeName:"",number:"",name:"",typeID:"",price:"",applyTime:this.getTime(),taskTypeID:"2",status:"",approvalID:""},dialogTitle:"",dialogFormVisible:!1,fixedTypeList:[],isCreate:!1,isUpdate:!1,employeeName:"",employeeNumber:"",isApproval:!1,form:{id:"",number:sessionStorage.getItem("username"),name:"",sex:"",birthday:"",departmentID:"",position:"",type:"",entryDate:"",phone:"",address:"",password:"",checkPass:""},checkList:[],checkMonth:new Date,activeName:"fixed",rules:{number:[{required:!0,message:"请输入固定资产编号",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入固定资产名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],typeID:[{required:!0,message:"请选择固定资产类别",trigger:"change"}],price:[{required:!0,message:"价格不能为空"},{type:"number",message:"价格必须为数字值"}]}}},created:function(){this.getUsername(),this.getFixedList(),this.getCheckList(),this.getTypeList()},methods:{getFixedList:function(){var e=this;s.a.get("/fixedasset/list").then(function(t){e.fixedList=t.data})},resetForm:function(){this.$refs.ruleForm.resetFields(),this.ruleForm.employeeName=this.employeeName,this.ruleForm.applyTime=this.getTime(),this.employeeNumber=sessionStorage.getItem("username"),this.taskTypeID="2"},createFixed:function(){this.dialogTitle="购置固定资产",this.isCreate=!0,this.isUpdate=!1,this.isApproval=!1,this.dialogFormVisible=!0,this.resetForm(),this.getTypeList()},updateFixed:function(e){this.ruleForm=l()({},e),this.ruleForm.employeeName=this.employeeName,"0"==this.ruleForm.status?this.isApproval=!1:"1"!=this.ruleForm.status&&"2"!=this.ruleForm.status||(this.isApproval=!0),this.dialogTitle="资产详情",this.isUpdate=!0,this.isCreate=!1,this.dialogFormVisible=!0},getUsername:function(){var e=this;s.a.post("/employee/findByNumber",this.form).then(function(t){e.employeeName=t.data.name,e.employeeNumber=t.data.number,e.ruleForm.employeeName=t.data.name,e.ruleForm.employeeNumber=t.data.number})},getTypeList:function(){var e=this;s.a.get("/fixedassetType/list").then(function(t){e.fixedTypeList=t.data})},insertFixed:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;s.a.post("/fixedasset/insert",t.ruleForm).then(function(a){200==a.data.code?(t.dialogFormVisible=!1,t.$message({message:"购置成功",type:"success"}),t.$refs[e].resetFields(),t.ruleForm.employeeName=t.employeeName,t.ruleForm.applyTime=t.getTime(),t.dialogFormVisible=!1,t.getData()):20005==a.data.code&&t.$message({message:"该编号已存在",type:"error"})})})},getTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),l=e.getMinutes(),i=e.getHours(),s=e.getSeconds();return a>=1&&a<=9&&(a="0"+a),r>=0&&r<=9&&(r="0"+r),i>=0&&i<=9&&(i="0"+i),l>=0&&l<=9&&(l="0"+l),s>=0&&s<=9&&(s="0"+s),t+"-"+a+"-"+r+" "+i+":"+l+":"+s},deleteFixed:function(){},getCheckList:function(){var e=this;s.a.post("/check/getCheckList",{date:this.checkMonth,month:this.checkMonth}).then(function(t){e.checkList=t.data})},payOff:function(e){var t=this;e.month=this.checkMonth;var a=new Date,r=new Date(e.month);a.getFullYear()!==r.getFullYear()||a.getMonth()!==r.getMonth()?s.a.post("/salary/payOff",e).then(function(e){200==e.data.code?t.$message({message:"发放成功",type:"success"}):50003==e.data.code&&t.$message({message:"请勿重复发放",type:"error"}),t.getCheckList()}):this.$message({message:"无法发放当月工资条",type:"error"})},exportCheck:function(){var e=new Date(this.checkMonth),t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");window.open("http://localhost:9331/check/exportExcel?month="+t+"-"+a+"-"+r)}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-left":"-20px"}},[a("div",{staticStyle:{margin:"0 0 -12px 40px"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"固定资产",name:"fixed"}},[a("div",{staticStyle:{"margin-left":"20px"}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(t){return e.createFixed()}}},[e._v(" 购置固定资产")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fixedList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"number",label:"固定资产编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"类别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"360",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.updateFixed(t.row)}}},[e._v(" 查看详情")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.deleteFixed(t.row)}}},[e._v(" 报废处理")])]}}])})],1)],1)])]),e._v(" "),a("el-tab-pane",{attrs:{label:"工资发放",name:"check"}},[a("div",{staticStyle:{"margin-left":"15px","margin-top":"20px"}},[a("div",[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("选择月份")]),e._v(" "),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月","value-format":"yyyy-MM"},model:{value:e.checkMonth,callback:function(t){e.checkMonth=t},expression:"checkMonth"}})],1),a("br"),e._v(" "),a("div",{staticClass:"block"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getCheckList()}}},[e._v(" 查询")]),e._v(" "),a("el-button",{directives:[{name:"print",rawName:"v-print",value:"#check",expression:"'#check'"}],attrs:{type:"primary"}},[e._v(" 打印报表")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.exportCheck()}}},[e._v(" 导出报表")])],1)]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"check"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.checkList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"employeeID",label:"员工编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"workDays",label:"应出勤（天）"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkDays",label:"实际出勤（天）"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leaveDays",label:"请假（天）"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lateDays",label:"迟到（次）"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leaveEarlyDays",label:"早退（次）"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leaveDays",label:"缺勤（次）"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.payOff(t.row)}}},[e._v(" 发放工资条")])]}}])})],1)],1)])])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{width:"100%"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"申请人",prop:"employeeName"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.employeeName,callback:function(t){e.$set(e.ruleForm,"employeeName",t)},expression:"ruleForm.employeeName"}})],1),e._v(" "),e.isUpdate?a("el-form-item",{attrs:{label:"申请时间",prop:"applyTime"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.applyTime,callback:function(t){e.$set(e.ruleForm,"applyTime",t)},expression:"ruleForm.applyTime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"编号",prop:"number"}},[a("el-input",{attrs:{placeholder:"请输入固定资产编号",readonly:e.isUpdate},model:{value:e.ruleForm.number,callback:function(t){e.$set(e.ruleForm,"number",t)},expression:"ruleForm.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入固定资产名称",readonly:e.isUpdate},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格",prop:"price"}},[a("el-input",{attrs:{placeholder:"请输入固定资产价格",readonly:e.isUpdate},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",e._n(t))},expression:"ruleForm.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别",prop:"typeID"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择固定资产类别",disabled:e.isUpdate},model:{value:e.ruleForm.typeID,callback:function(t){e.$set(e.ruleForm,"typeID",t)},expression:"ruleForm.typeID"}},e._l(e.fixedTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),e.isApproval?a("el-form-item",{attrs:{label:"审批人",prop:"approvalName"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.employeeName,callback:function(t){e.$set(e.ruleForm,"employeeName",t)},expression:"ruleForm.employeeName"}})],1):e._e(),e._v(" "),e.isApproval?a("el-form-item",{attrs:{label:"审批时间",prop:"approvalTime"}},[a("el-input",{attrs:{readonly:""},model:{value:e.ruleForm.approvalTime,callback:function(t){e.$set(e.ruleForm,"approvalTime",t)},expression:"ruleForm.approvalTime"}})],1):e._e(),e._v(" "),e.isUpdate?a("el-form-item",{attrs:{label:"审批状态",prop:"course"}},[a("el-input",{attrs:{readonly:e.isUpdate},model:{value:e.ruleForm.statusName,callback:function(t){e.$set(e.ruleForm,"statusName",t)},expression:"ruleForm.statusName"}})],1):e._e(),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消")]),e._v(" "),e.isCreate?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.insertFixed("ruleForm")}}},[e._v(" 立即购置")]):e._e()],1)],1)],1)],1)},staticRenderFns:[]},m=a("VU/8")(o,n,!1,null,null,null);t.default=m.exports}});
//# sourceMappingURL=14.3a43f95579f06edee4dc.js.map