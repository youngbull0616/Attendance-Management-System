webpackJsonp([6],{"A/C1":function(t,e){},u2zD:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),l=a("mtWM"),o=a.n(l),s={data:function(){return{tableData:[{number:"2016-05-02",name:"王小虎",quantity:"上海市普陀区金沙江路 1518 弄"},{number:"2016-05-04",name:"王小虎",quantity:"上海市普陀区金沙江路 1517 弄"},{number:"2016-05-01",name:"王小虎",quantity:"上海市普陀区金沙江路 1519 弄"},{number:"2016-05-03",name:"王小虎",quantity:"上海市普陀区金沙江路 1516 弄"}],dialogFormVisible:!1,dialogTitle:"",form:{id:"",number:"",name:"",quantity:"",posNum:""},dialogFormVisible2:!1,dialogTitle2:"",form2:{id:"",number:"",name:"",quantity:"",monthlySalary:"",departmentID:"",typeID:""},id:"",isCreate:!1,isUpdate:!1,dialogFormVisible3:!1,positionList:[],typeList:[],rules:{number:[{required:!0,message:"请输入部门编号",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 15 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 15 个字符",trigger:"blur"}]},rules2:{number:[{required:!0,message:"请输入岗位编号",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 15 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入岗位名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 15 个字符",trigger:"blur"}],typeID:[{required:!0,message:"请选择岗位类型",trigger:"change"}],departmentID:[{required:!0,validator:this.checkDepartment,trigger:"change"}],monthlySalary:[{required:!0,message:"薪资不能为空",trigger:"blur"}]}}},created:function(){this.getData(),this.getTypeList()},methods:{getData:function(){var t=this;o.a.get("/department/list").then(function(e){t.tableData=e.data})},getTypeList:function(){var t=this;o.a.get("/employeeType/list").then(function(e){t.typeList=e.data})},resetForm1:function(){this.form={id:"",number:"",name:"",quantity:"",posNum:""}},resetForm2:function(){this.form2={id:"",number:"",name:"",quantity:"",monthlySalary:"",departmentID:"",typeID:""}},handleCreate:function(){this.dialogTitle="添加部门",this.isCreate=!0,this.isUpdate=!1,this.dialogFormVisible=!0,this.resetForm1()},handleCreate2:function(){this.dialogTitle2="新增岗位",this.isCreate=!0,this.isUpdate=!1,this.dialogFormVisible2=!0,this.resetForm2()},handleUpdate:function(t){this.form=r()({},t),this.dialogTitle="编辑部门信息",this.isUpdate=!0,this.isCreate=!1,this.dialogFormVisible=!0},handleUpdate2:function(t){this.form2=r()({},t),this.dialogTitle2="编辑岗位信息",this.isUpdate=!0,this.isCreate=!1,this.dialogFormVisible2=!0},handleDelete:function(t){var e=this;t&&(this.id=t.id),this.$confirm("确定删除该部门及以下所有岗位吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.post("/department/deleteById",{id:e.id}).then(function(t){200==t.data.code?e.$message({message:"删除成功",type:"success"}):50003==t.data.code&&e.$message({message:"该部门还有员工不能删除",type:"error"}),e.getData()})})},handleDelete2:function(t){var e=this;t&&(this.id=t.id),this.$confirm("确定删除该岗位吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.post("/position/deleteById",{id:e.id}).then(function(t){200==t.data.code?e.$message({message:"删除成功",type:"success"}):50003==t.data.code&&e.$message({message:"该岗位还有员工不能删除",type:"error"}),e.getData()})})},onSubmit:function(){},createData:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;o.a.post("/department/insert",t.form).then(function(e){200==e.data.code?(t.dialogFormVisible=!1,t.$message({message:"添加成功",type:"success"}),t.getData()):20005==e.data.code&&t.$message({message:"该编号已存在",type:"error"})})})},updateData:function(){var t=this;o.a.post("/department/update",this.form).then(function(e){t.dialogFormVisible=!1,t.$message({message:"修改成功",type:"success"}),t.getData()})},createData2:function(){var t=this;this.$refs.form2.validate(function(e){if(!e)return!1;o.a.post("/position/insert",t.form2).then(function(e){200==e.data.code?(t.dialogFormVisible2=!1,t.dialogFormVisible3=!1,t.$message({message:"添加成功",type:"success"}),t.getData()):20005==e.data.code&&t.$message({message:"该编号已存在",type:"error"})})})},updateData2:function(){var t=this;o.a.post("/position/update",this.form2).then(function(e){t.dialogFormVisible2=!1,t.dialogFormVisible3=!1,t.$message({message:"修改成功",type:"success"}),t.getData()})},getPosition:function(t){var e=this;o.a.post("/position/findByDepartmentID",{departmentID:t.id}).then(function(t){e.positionList=t.data,e.dialogFormVisible3=!0,e.dialogTitle3="岗位列表"})},checkDepartment:function(t,e,a){this.form2.typeID?e?a():a(new Error("部门不能为空！")):e?a():a(new Error("部门不能为空1！"))}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pro-container"},[a("div",{staticClass:"filter-container",staticStyle:{display:"flex"}},[a("div",{staticClass:"letf-items"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v(" 新增部门")])],1),t._v(" "),a("div",{staticClass:"right-items"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.handleCreate2}},[t._v(" 新增岗位")])],1)]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"number",label:"部门编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"部门名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"部门人数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"posNum",label:"岗位数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"430",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.getPosition(e.row)}}},[t._v(" 查看岗位")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v(" 编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v(" 删除")])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",staticStyle:{width:"420px","margin-left":"50px"},attrs:{rules:t.rules,model:t.form,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"编号",prop:"number"}},[a("el-input",{attrs:{placeholder:"请输入部门编号~"},model:{value:t.form.number,callback:function(e){t.$set(t.form,"number",e)},expression:"form.number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入部门名称~"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),t.isUpdate?a("el-form-item",{attrs:{label:"部门人数"}},[a("el-input",{attrs:{readonly:t.isUpdate},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",e)},expression:"form.quantity"}})],1):t._e(),t._v(" "),t.isUpdate?a("el-form-item",{attrs:{label:"岗位数量"}},[a("el-input",{attrs:{readonly:t.isUpdate},model:{value:t.form.posNum,callback:function(e){t.$set(t.form,"posNum",e)},expression:"form.posNum"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(" 取消")]),t._v(" "),t.isCreate?a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.createData()}}},[t._v(" 新增")]):t._e(),t._v(" "),t.isUpdate?a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.updateData()}}},[t._v(" 修改")]):t._e()],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle2,visible:t.dialogFormVisible2},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[a("el-form",{ref:"form2",staticStyle:{width:"420px","margin-left":"50px"},attrs:{rules:t.rules2,model:t.form2,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"编号",prop:"number"}},[a("el-input",{attrs:{placeholder:"请输入岗位编号~"},model:{value:t.form2.number,callback:function(e){t.$set(t.form2,"number",e)},expression:"form2.number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"岗位类别",prop:"typeID"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:t.form2.typeID,callback:function(e){t.$set(t.form2,"typeID",e)},expression:"form2.typeID"}},t._l(t.typeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"所属部门",prop:"departmentID"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:t.form2.departmentID,callback:function(e){t.$set(t.form2,"departmentID",e)},expression:"form2.departmentID"}},t._l(t.tableData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入岗位名称~"},model:{value:t.form2.name,callback:function(e){t.$set(t.form2,"name",e)},expression:"form2.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"薪资",prop:"monthlySalary"}},[a("el-input",{attrs:{placeholder:"请输入岗位薪资~"},model:{value:t.form2.monthlySalary,callback:function(e){t.$set(t.form2,"monthlySalary",e)},expression:"form2.monthlySalary"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v(" 取消")]),t._v(" "),t.isCreate?a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.createData2()}}},[t._v(" 新增")]):t._e(),t._v(" "),t.isUpdate?a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.updateData2()}}},[t._v(" 修改")]):t._e()],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"岗位列表",visible:t.dialogFormVisible3},on:{"update:visible":function(e){t.dialogFormVisible3=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.positionList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"number",label:"岗位编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"岗位名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"monthlySalary",label:"岗位薪资"}}),t._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"在职人数"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return t.handleUpdate2(e.row)}}},[t._v(" 编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDelete2(e.row)}}},[t._v(" 删除")])]}}])})],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(s,n,!1,function(t){a("A/C1")},"data-v-336311be",null);e.default=m.exports}});
//# sourceMappingURL=6.b3f3f66591fa4b039623.js.map