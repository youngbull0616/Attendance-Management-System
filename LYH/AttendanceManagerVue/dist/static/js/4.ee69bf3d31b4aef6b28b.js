webpackJsonp([4],{GifZ:function(e,t){},IlrF:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),r=i.n(a),l=i("mtWM"),s=i.n(l),o={data:function(){return{tableData:[{title:"这是一个通知",time:"之后一年时间",place:"公司之外的地方",participants:"全体员工",host:"董事长",details:"明天开始放年假，放一年",publisher:"系统管理员"}],dialogFormVisible:!1,dialogTitle:"",form:{id:"",title:"",time:"",place:"",participants:"",host:"",details:"",publisherNumber:"",publisherName:"",publishTime:"",beginDate:"",endDate:"",type:"2"},form1:{id:"",number:sessionStorage.getItem("username"),name:"",sex:"",birthday:"",departmentID:"",position:"",type:"",entryDate:"",phone:"",address:"",password:"",checkPass:""},id:"",employeeName:"",employeeNumber:"",isCreate:!1,isUpdate:!1,isShow:!1,rules:{title:[{required:!0,message:"标题不能为空！",trigger:"blur"}],beginDate:[{validator:this.beginDate,trigger:"change"}],endDate:[{validator:this.endDate,trigger:"change"}]},isAdmin:!1}},created:function(){this.getData(),this.getUsername()},methods:{getData:function(){var e=this;s.a.get("/meeting/getAllNotice").then(function(t){e.tableData=t.data})},resetTemp:function(){this.form={id:"",title:"",time:"",place:"",participants:"",host:"",details:"",publisherNumber:this.employeeNumber,publisherName:this.employeeName,publishTime:this.getTime(),beginDate:"",endDate:"",type:"2"}},resetForm:function(){this.form={id:"",title:"",time:"",place:"",participants:"",host:"",details:"",publisherNumber:"",publisherName:"",publishTime:this.getTime(),beginDate:"",endDate:"",type:"2"},this.form.publisherNumber=this.employeeNumber,this.form.publisherName=this.employeeName,this.form.publishTime=this.getTime(),this.form.type="2"},handleCreate:function(){this.dialogTitle="发布通知",this.isCreate=!0,this.isUpdate=!1,this.isShow=!0,this.dialogFormVisible=!0,this.resetForm()},handleUpdate:function(e){this.form=r()({},e),this.dialogTitle="查看通知详情",this.isCreate=!1,this.isUpdate=!0,this.isShow=!1,this.dialogFormVisible=!0},handleDelete:function(e){var t=this;e&&(this.id=e.id),this.$confirm("确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.a.post("/meeting/deleteById",{id:t.id}).then(function(e){t.$message({message:"删除成功",type:"success"}),t.getData()})})},onSubmit:function(){},createData:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.beginDate=e.rTime(e.form.beginDate),e.form.endDate=e.rTime(e.form.endDate),s.a.post("/meeting/insert",e.form).then(function(t){e.dialogFormVisible=!1,e.$message({message:"发布成功",type:"success"}),e.getData()})})},rTime:function(e){var t=new Date(e).toJSON();return new Date(new Date(t)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")},getUsername:function(){var e=this;s.a.post("/employee/findByNumber",this.form1).then(function(t){e.employeeName=t.data.name,e.employeeNumber=t.data.number,e.form.publisherName=t.data.name,e.form.publisherNumber=t.data.number,3==t.data.type?e.isAdmin=!0:e.isAdmin=!1})},getTime:function(){var e=new Date,t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),r=e.getMinutes(),l=e.getHours(),s=e.getSeconds();return i>=1&&i<=9&&(i="0"+i),a>=0&&a<=9&&(a="0"+a),l>=0&&l<=9&&(l="0"+l),r>=0&&r<=9&&(r="0"+r),s>=0&&s<=9&&(s="0"+s),t+"-"+i+"-"+a+" "+l+":"+r+":"+s},compareDate:function(e,t){return new Date(t).getTime()>new Date(e).getTime()},beginDate:function(e,t,i){t?this.compareDate(this.getTime(),t)?this.form.endDate?this.compareDate(t,this.form.endDate)?i():i(new Error("不能晚于结束日期请重新选择")):i():i(new Error("不能早于当前日期请重新选择")):i()},endDate:function(e,t,i){t&&this.form.beginDate?this.compareDate(this.form.beginDate,t)?i():i(new Error("不能早于开始日期请重新选择")):i()}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pro-container"},[i("div",{staticClass:"filter-container"},[i("div",{staticClass:"right-items",staticStyle:{"text-align":"left"}},[e.isAdmin?i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("\n        发通知")]):e._e()],1)]),e._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),i("el-table-column",{attrs:{prop:"publisherName",label:"发布人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"details",label:"详情"}}),e._v(" "),i("el-table-column",{attrs:{prop:"beginDate",label:"开始日期"}}),e._v(" "),i("el-table-column",{attrs:{prop:"endDate",label:"结束日期"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"success"},on:{click:function(i){return e.handleUpdate(t.row)}}},[e._v(" 查看详情")])]}}])})],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"form",staticStyle:{width:"420px","margin-left":"50px"},attrs:{rules:e.rules,model:e.form,"label-position":"left","label-width":"120px"}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入通知标题~",readonly:e.isUpdate},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"开始时间",prop:"beginDate"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择开始日期","value-format":"yyyy-MM-dd",readonly:e.isUpdate},model:{value:e.form.beginDate,callback:function(t){e.$set(e.form,"beginDate",t)},expression:"form.beginDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束时间",prop:"endDate"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择结束日期","value-format":"yyyy-MM-dd",readonly:e.isUpdate},model:{value:e.form.endDate,callback:function(t){e.$set(e.form,"endDate",t)},expression:"form.endDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"发布人"}},[i("el-input",{attrs:{placeholder:"请输入通知发布人~",readonly:""},model:{value:e.form.publisherName,callback:function(t){e.$set(e.form,"publisherName",t)},expression:"form.publisherName"}})],1),e._v(" "),e.isUpdate?i("el-form-item",{attrs:{label:"发布时间"}},[i("el-input",{attrs:{readonly:""},model:{value:e.form.publishTime,callback:function(t){e.$set(e.form,"publishTime",t)},expression:"form.publishTime"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"详情"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入通知详情~",readonly:e.isUpdate},model:{value:e.form.details,callback:function(t){e.$set(e.form,"details",t)},expression:"form.details"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消")]),e._v(" "),e.isShow?i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createData()}}},[e._v(" 确 定")]):e._e()],1)],1)],1)},staticRenderFns:[]};var m=i("VU/8")(o,n,!1,function(e){i("GifZ")},"data-v-65769886",null);t.default=m.exports}});
//# sourceMappingURL=4.ee69bf3d31b4aef6b28b.js.map