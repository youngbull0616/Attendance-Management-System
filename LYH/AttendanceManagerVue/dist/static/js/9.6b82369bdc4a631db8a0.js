webpackJsonp([9],{"Cb+h":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),l=a.n(r),o=a("mtWM"),i=a.n(o),s={data:function(){return{tableData:[],customerType:"",customerTypeList:[{id:"1",value:"个人"},{id:"2",value:"公司"}],dialogFormVisible:!1,dialogTitle:"",form:{id:"",number:"",name:"",type:"",phone:"",address:"",remarks:"",applyNumber:""},form1:{id:"",number:"",name:"",type:"",phone:"",address:"",remarks:"",applyNumber:""},id:"",isCreate:!1,isUpdate:!1,number:sessionStorage.getItem("username"),employeeType:"",rules:{number:[{required:!0,message:"客户编号不能为空",trigger:"blur"}],name:[{required:!0,message:"客户名称不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择客户类型",trigger:"change"}]}}},created:function(){this.getData()},methods:{getData:function(){var e=this;i.a.post("/employee/findByNumber",{number:this.number}).then(function(t){"3"==t.data.type?i.a.get("/customer/list").then(function(t){e.tableData=t.data}):i.a.post("/customer/findByApplyNumber",{applyNumber:e.number}).then(function(t){e.tableData=t.data})})},resetTemp:function(){this.form={id:"",number:"",name:"",type:"",phone:"",address:"",remarks:""}},resetForm:function(){this.form={id:"",number:"",name:"",type:"",phone:"",address:"",remarks:"",applyNumber:""}},handleCreate:function(){this.dialogTitle="添加客户",this.isCreate=!0,this.isUpdate=!1,this.dialogFormVisible=!0,this.resetForm()},handleUpdate:function(e){this.form=l()({},e),this.dialogTitle="编辑客户信息",this.isUpdate=!0,this.isCreate=!1,this.dialogFormVisible=!0},handleDelete:function(e){var t=this;e&&(this.id=e.id),this.$confirm("确定删除？"+e.id,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.a.post("/customer/deleteById",{id:t.id}).then(function(e){t.$message({message:"删除成功",type:"success"}),t.getData()})})},onSubmit:function(){var e=this;i.a.post("/customer/findByNameAndType",this.form1).then(function(t){e.tableData=t.data})},createData:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.form.applyNumber=e.number,i.a.post("/customer/insert",e.form).then(function(t){200==t.data.code?(e.dialogFormVisible=!1,e.$message({message:"添加成功",type:"success"}),e.getData()):20005==t.data.code&&e.$message({message:"该编号已存在",type:"error"})})})},updateData:function(){var e=this;i.a.post("/customer/update",this.form).then(function(t){e.dialogFormVisible=!1,e.$message({message:"修改成功",type:"success"}),e.getData()})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pro-container"},[a("div",{staticStyle:{"text-align":"left"}},[a("div",[a("el-select",{attrs:{clearable:"",placeholder:"请选择客户类别"},model:{value:e.form1.type,callback:function(t){e.$set(e.form1,"type",t)},expression:"form1.type"}},e._l(e.customerTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})}),1),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter.apply(null,arguments)}},model:{value:e.form1.name,callback:function(t){e.$set(e.form1,"name",t)},expression:"form1.name"}}),e._v(" "),a("br"),e._v(" "),a("br")],1),e._v(" "),a("el-row",[a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 查询")]),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v(" 新增")])],1),e._v(" "),a("div",{staticClass:"right-items"})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"number",label:"客户编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remarks",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v(" 编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(" 删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",staticStyle:{width:"420px","margin-left":"50px"},attrs:{rules:e.rules,model:e.form,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"编号",prop:"number"}},[a("el-input",{attrs:{placeholder:"请输入客户编号~"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入客户姓名或名称~"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.customerTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{attrs:{placeholder:"请输入联系方式~"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"请输入地址~"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入备注~"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取 消")]),e._v(" "),e.isCreate?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createData()}}},[e._v(" 新增")]):e._e(),e._v(" "),e.isUpdate?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateData()}}},[e._v("修 改")]):e._e()],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(s,n,!1,function(e){a("J/b+")},"data-v-1c129df4",null);t.default=m.exports},"J/b+":function(e,t){}});
//# sourceMappingURL=9.6b82369bdc4a631db8a0.js.map